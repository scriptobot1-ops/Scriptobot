<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Login - Scriptobot</title>
  <style>
    /* Base Reset */
    * { margin:0; padding:0; box-sizing:border-box; }
    body { font-family: Arial, sans-serif; transition:0.3s; }

    /* Theme Variables - Defaulting to Dark theme for Black Background */
    :root {
      --bg:#121212; /* Dark background */
      --text:#f5f5f5; /* Light text */
      --accent:#e63946; /* Accent red color */
      --glass: rgba(0,0,0,0.3); /* Dark transparent glass effect */
      --shadow-dark: rgba(0,0,0,0.2);
    }
    /* Agar aapko light theme bhi chahiye to body.light class define kar sakte hain */
    /* body.light {
      --bg: #f5f5f5;
      --text:#222;
      --glass: rgba(255,255,255,0.3);
      --shadow-dark: rgba(0,0,0,0.2);
    } */

    /* General Body Enhancements */
    body {
      line-height: 1.6;
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      text-rendering: optimizeLegibility;
      background:var(--bg); /* Ensure body background applies theme var */
      color:var(--text); /* Ensure body text color applies theme var */
      display: flex; /* Flexbox for sticky footer */
      flex-direction: column; /* Stack children vertically */
      min-height: 100vh; /* Minimum height is full viewport height */
    }

    /* Custom Scrollbar */
    ::-webkit-scrollbar { width: 10px; }
    ::-webkit-scrollbar-track { background: var(--bg); }
    ::-webkit-scrollbar-thumb {
      background: var(--accent);
      border-radius: 5px;
      border: 2px solid var(--bg);
    }
    ::-webkit-scrollbar-thumb:hover { background: var(--accent); }

    /* Text Selection Style */
    ::selection { background-color: var(--accent); color: var(--bg); }

    /* Focus States (Accessibility & UX) */
    :focus-visible {
      outline: 2px solid var(--accent);
      outline-offset: 3px;
      border-radius: 4px;
    }
    .btn:focus-visible,
    input:focus-visible {
      border-radius: 8px;
    }

    /* Navbar */
    .site-header {
      backdrop-filter: blur(10px);
      background: var(--glass); /* Transparent dark glass */
      position: sticky;
      top:0;
      z-index:100;
      box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
    }
    .navbar {
      display:flex;
      justify-content:space-between;
      align-items:center;
      padding:1rem 2rem;
    }
    .brand {
      font-size:1.5rem;
      font-weight:bold;
      color:var(--accent);
      text-decoration:none;
      text-shadow: 0 0 5px rgba(230, 57, 70, 0.4);
    }
    .nav-links {
      display:flex;
      list-style:none;
      gap:1.5rem;
    }
    .nav-links a {
      text-decoration:none;
      color:var(--text);
      font-weight:bold;
      position: relative;
      transition: color 0.3s ease-in-out, text-shadow 0.3s ease-in-out;
    }
    .nav-links a::after {
      content: '';
      position: absolute;
      left: 0;
      bottom: -5px;
      width: 0;
      height: 2px;
      background: var(--accent);
      transition: width 0.3s ease-out;
    }
    .nav-links a:hover {
      color: var(--accent);
      text-shadow: 0 0 8px rgba(230, 57, 70, 0.4);
    }
    .nav-links a:hover::after {
      width: 100%;
    }

    /* Uiverse Hamburger Styles */
    .hamburger-checkbox-hidden {
      position: absolute;
      opacity: 0;
      pointer-events: none;
      width: 1px;
      height: 1px;
      overflow: hidden;
      clip: rect(0 0 0 0);
      white-space: nowrap;
      border: 0;
    }
    .hamburger {
      cursor: pointer;
      display: none; /* Hidden by default, shown on mobile */
      align-items: center;
      justify-content: center;
      padding: 0.5rem;
      border-radius: 8px;
      transition: background-color 0.3s ease;
      z-index: 1001;
    }
    .hamburger:hover { background-color: rgba(255, 255, 255, 0.1); }
    .hamburger-checkbox-hidden:checked + .hamburger svg { transform: rotate(-45deg); }
    .hamburger-checkbox-hidden:checked + .hamburger .line-top-bottom {
      stroke-dasharray: 20 300;
      stroke-dashoffset: -32.42;
    }
    .hamburger svg {
      height: 2.2em;
      width: 2.2em;
      transition: transform 600ms cubic-bezier(0.4, 0, 0.2, 1);
    }
    .line {
      fill: none;
      stroke: var(--text);
      stroke-linecap: round;
      stroke-linejoin: round;
      stroke-width: 3;
      transition: stroke-dasharray 600ms cubic-bezier(0.4, 0, 0.2, 1),
                  stroke-dashoffset 600ms cubic-bezier(0.4, 0, 0.2, 1);
    }
    .line-top-bottom { stroke-dasharray: 12 63; }

    /* Buttons General */
    .btn {
      padding:0.75rem 1.5rem;
      border-radius:2rem;
      font-weight:bold;
      text-decoration:none;
      transition:0.3s;
      letter-spacing: 0.05em;
      border: none;
      cursor: pointer;
      display: inline-flex; /* Changed to inline-flex for better button content alignment */
      align-items: center; /* Center content vertically */
      justify-content: center; /* Center content horizontally */
      gap: 8px; /* Space between icon and text */
    }
    .btn.primary {
      background:var(--accent);
      color:#fff;
      box-shadow: 0 4px 15px rgba(230, 57, 70, 0.4);
    }
    .btn.primary:hover {
      opacity: 0.9;
      box-shadow: 0 6px 20px rgba(230, 57, 70, 0.6);
      transform: translateY(-2px); /* Slightly less aggressive transform */
    }

    /* Main Content Area */
    main {
      flex-grow: 1; /* Allows main content to take up available space, pushing footer down */
      display: flex; /* Use flex to center auth-section */
      align-items: center; /* Center vertically */
      justify-content: center; /* Center horizontally */
      padding: 2rem; /* Add some padding around the content */
    }

    /* Login/Signup Section (Auth Form) */
    .auth-section {
      max-width: 400px;
      width: 100%; /* Make it fill its container up to max-width */
      padding: 2rem;
      border-radius: 1rem;
      background: var(--glass); /* Transparent dark glass */
      backdrop-filter: blur(15px);
      box-shadow: 0 10px 25px rgba(0,0,0,0.1);
      text-align: center;
      position: relative;
      overflow: hidden;
      border: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 15px 40px rgba(0,0,0,0.25);
    }
    .auth-section::before,
    .auth-section::after {
      content: '';
      position: absolute;
      border-radius: 50%;
      z-index: 0;
    }
    .auth-section::before {
      width: 200px; height: 200px;
      background: rgba(230,57,70,0.2);
      top: -50px; left: -50px;
      animation: float1 6s ease-in-out infinite;
    }
    .auth-section::after {
      width: 150px; height: 150px;
      background: rgba(101,31,255,0.2);
      bottom: -40px; right: -40px;
      animation: float2 5s ease-in-out infinite;
    }
    @keyframes float1 {
      0%,100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(20px) rotate(45deg); }
    }
    @keyframes float2 {
      0%,100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-15px) rotate(-30deg); }
    }
    .auth-section h2 {
      font-size:2rem;
      margin-bottom:0.5rem;
      color:var(--accent);
      position: relative;
      z-index:1;
      text-shadow: 1px 1px 5px rgba(230, 57, 70, 0.4);
    }
    .auth-section p { margin-bottom:1.5rem; color:var(--text); z-index:1; position: relative; }
    .auth-section input {
      width: 90%;
      padding: 0.75rem 1rem;
      margin-bottom: 1rem;
      border-radius: 2rem;
      border: 2px solid rgba(230, 57, 70, 0.5);
      background: rgba(0,0,0,0.1);
      color: var(--text);
      transition: all 0.3s ease;
      position: relative;
      z-index:1;
    }
    .auth-section input:focus {
      outline: none;
      border-color: var(--accent);
      box-shadow: 0 0 15px rgba(230, 57, 70, 0.6);
      background: var(--bg);
    }
    .auth-section a {
      color: var(--accent);
      text-decoration: none;
      transition: color 0.3s;
      z-index:1;
      position: relative;
    }
    .auth-section a:hover {
      color: var(--accent);
      text-decoration: underline;
    }
    /* login-msg p tag is no longer needed with toasts */

    /* "Forgot Password?" link */
    .auth-section .forgot-password-link {
      display: block; /* Make it take full width for better clickability */
      margin-top: 1rem;
      font-size: 0.9rem;
      color: var(--text); /* Use general text color */
      text-decoration: none;
      cursor: pointer;
      transition: color 0.3s ease;
    }
    .auth-section .forgot-password-link:hover {
      color: var(--accent);
      text-decoration: underline;
    }

    /* --- Google Button Enhanced Styles --- */
    .btn.google-btn {
      width: 90%; /* Match login button width */
      margin: 1rem auto 0 auto; /* Center and give margin */
      background-color: #fff; /* White background for Google button */
      color: #757575; /* Dark grey text */
      border: 1px solid #ddd; /* Subtle border */
      box-shadow: 0 2px 4px 0 rgba(0,0,0,0.25); /* Subtle shadow */
      font-weight: 500; /* Slightly less bold */
      padding: 0.6rem 1.2rem; /* Adjusted padding */
      border-radius: 0.3rem; /* Slightly less rounded corners for Google feel */
      font-size: 1rem;
      transition: all 0.2s ease-in-out;
    }

    .btn.google-btn:hover {
      background-color: #f0f0f0; /* Slight grey on hover */
      box-shadow: 0 3px 6px 0 rgba(0,0,0,0.3);
      transform: translateY(-1px); /* Subtle lift */
    }

    .btn.google-btn:active {
      background-color: #e0e0e0; /* Darker grey on click */
      box-shadow: inset 0 1px 2px rgba(0,0,0,0.2); /* Inset shadow */
      transform: translateY(0);
    }

    .btn.google-btn .google-icon {
      width: 18px; /* Standard Google icon size */
      height: 18px;
      display: inline-block;
      vertical-align: middle;
      margin-right: 8px; /* Space between icon and text */
    }
    /* --- End Google Button Enhanced Styles --- */

    /* Video Background */
    .video-background {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      overflow: hidden;
      z-index: -2; /* Even lower z-index than loading screen */
    }
    .video-background video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      filter: brightness(0.4) saturate(1.2);
    }

    /* Loading Video Screen */
    #loading-video-screen {
      position: fixed;
      top: 0;
      left: 0;
      width: 100vw;
      height: 100vh;
      background-color: #000000;
      display: flex;
      justify-content: center;
      align-items: center;
      z-index: 99999;
      opacity: 1;
      visibility: visible;
      transition: opacity 0.7s ease-out, visibility 0.7s ease-out;
    }
    #loading-video-screen video {
      width: 100%;
      height: 100%;
      object-fit: cover;
      display: block;
    }
    #loading-video-screen.hidden {
      opacity: 0;
      visibility: hidden;
      pointer-events: none;
    }

    /* Scroll to Top Button Styling */
    #scrollToTopBtn {
      display: none;
      position: fixed;
      bottom: 30px;
      right: 30px;
      background-color: var(--accent);
      color: #fff;
      border: none;
      border-radius: 50%;
      width: 50px;
      height: 50px;
      font-size: 1.8rem;
      line-height: 50px;
      text-align: center;
      cursor: pointer;
      z-index: 900;
      box-shadow: 0 5px 15px rgba(255, 59, 59, 0.4);
      transition: background-color 0.3s ease, box-shadow 0.3s ease, transform 0.2s ease;
    }
    #scrollToTopBtn:hover {
      background-color: #e22a2a;
      box-shadow: 0 8px 20px rgba(255, 59, 59, 0.5);
      transform: translateY(-2px);
    }

    /* Simple Footer Styles */
    footer {
      padding: 1.5rem 2rem;
      text-align: center;
      background: var(--glass); /* Transparent dark glass */
      backdrop-filter: blur(10px);
      color: var(--text);
      border-top: 1px solid rgba(255, 255, 255, 0.1);
      box-shadow: 0 -2px 10px rgba(0, 0, 0, 0.1);
      flex-shrink: 0; /* Prevents footer from shrinking */
    }
    footer p {
      font-size: 0.9rem;
      opacity: 0.9;
    }

    /* --- TOAST NOTIFICATION STYLES --- */
    .toast-notification {
      visibility: hidden; /* Default hidden */
      min-width: 280px; /* Minimum width */
      background-color: var(--glass); /* Glass background */
      backdrop-filter: blur(10px); /* Blur effect */
      color: var(--text); /* Text color from theme */
      text-align: center; /* Centered text */
      border-radius: 10px; /* Rounded corners */
      padding: 16px 20px; /* Padding */
      position: fixed; /* Fixed position */
      z-index: 10000; /* On top of everything, higher than loading screen */
      left: 50%; /* Center horizontally */
      transform: translateX(-50%); /* Adjust for true centering */
      top: 30px; /* Position from top */
      font-size: 1.1rem; /* Font size */
      font-weight: 600;
      box-shadow: 0 4px 15px var(--shadow-dark); /* Subtle shadow */
      opacity: 0; /* Hidden by default */
      transition: visibility 0.5s, opacity 0.5s ease-in-out, background-color 0.3s, color 0.3s, border-color 0.3s; /* Smooth transition */
      border: 1px solid transparent; /* Default transparent border */
    }

    .toast-notification.show {
      visibility: visible; /* Show when 'show' class is added */
      opacity: 1; /* Fully visible */
    }

    .toast-notification.success {
      background-color: rgba(76, 175, 80, 0.8); /* Green for success */
      color: white;
      border-color: rgba(76, 175, 80, 1);
    }

    .toast-notification.error {
      background-color: rgba(244, 67, 54, 0.8); /* Red for error */
      color: white;
      border-color: rgba(244, 67, 54, 1);
    }

    .toast-notification.info {
      background-color: rgba(13, 212, 19, 0.8); /* Blue for info */
      color: white;
      border-color: rgba(13, 212, 19, 0.8);
    }

    /* Password Reset Modal Styles */
    .password-reset-modal-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0,0,0,0.7); /* Darker overlay */
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 999; /* Below toast, above main content */
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    .password-reset-modal-overlay.show {
        opacity: 1;
        visibility: visible;
    }
    .password-reset-container {
        max-width: 350px;
        width: 90%;
        padding: 2rem;
        border-radius: 1rem;
        background: var(--glass); /* Transparent dark glass */
        backdrop-filter: blur(15px);
        box-shadow: 0 10px 25px rgba(0,0,0,0.1);
        text-align: center;
        position: relative;
        overflow: hidden;
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--text);
        animation: fadeInScale 0.3s ease-out;
    }
    @keyframes fadeInScale {
        from { opacity: 0; transform: scale(0.9); }
        to { opacity: 1; transform: scale(1); }
    }
    .password-reset-container h3 {
        color: var(--accent);
        margin-bottom: 1.5rem;
    }
    .password-reset-container input {
        width: calc(100% - 2rem); /* Adjust for padding in inputs */
        padding: 0.75rem 1rem;
        margin-bottom: 1rem;
        border-radius: 2rem;
        border: 2px solid rgba(230, 57, 70, 0.5);
        background: rgba(0,0,0,0.1);
        color: var(--text);
    }
    .password-reset-container input:focus {
        border-color: var(--accent);
        box-shadow: 0 0 8px rgba(230, 57, 70, 0.4);
        background: var(--bg);
    }
    .password-reset-actions {
        display: flex;
        justify-content: space-around;
        gap: 1rem;
        margin-top: 1.5rem;
    }
    .password-reset-actions .btn {
      flex: 1; /* Make buttons take equal space */
      padding: 0.75rem 1rem; /* Adjust padding */
      font-size: 0.95rem; /* Adjust font size */
    }

    /* NEW: Verified Profile Popup Styles */
    .verified-profile-popup-overlay {
        position: fixed;
        top: 0;
        left: 0;
        width: 100vw;
        height: 100vh;
        background: rgba(0,0,0,0.7); /* Darker overlay */
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 9998; /* Below toast, above password reset modal */
        opacity: 0;
        visibility: hidden;
        transition: opacity 0.3s ease, visibility 0.3s ease;
    }
    .verified-profile-popup-overlay.show {
        opacity: 1;
        visibility: visible;
    }
    .verified-profile-popup-content {
        max-width: 400px;
        width: 90%;
        padding: 2rem;
        border-radius: 1rem;
        background: var(--glass);
        backdrop-filter: blur(15px);
        box-shadow: 0 15px 40px rgba(0,0,0,0.25);
        text-align: center;
        position: relative;
        border: 1px solid rgba(255, 255, 255, 0.1);
        color: var(--text);
        animation: fadeInScale 0.3s ease-out;
    }
    .verified-profile-popup-content .close-button {
        position: absolute;
        top: 10px;
        right: 15px;
        font-size: 2.2rem;
        color: var(--text);
        cursor: pointer;
        transition: color 0.3s ease, transform 0.2s ease;
        line-height: 1;
    }
    .verified-profile-popup-content .close-button:hover {
        color: var(--accent);
        transform: rotate(90deg);
    }
    .verified-profile-popup-content p {
        margin-bottom: 1rem;
        font-size: 1.1rem;
    }
    .verified-profile-popup-content p:first-of-type { /* For "You are verified" message */
        color: var(--accent);
        font-weight: bold;
    }
    .verified-profile-popup-content .popup-actions {
        display: flex;
        justify-content: space-around;
        gap: 1rem;
        margin-top: 1.5rem;
    }
    .verified-profile-popup-content .popup-actions .btn {
        flex: 1;
        padding: 0.75rem 1rem;
        font-size: 0.95rem;
    }


    /* Responsive Adjustments */
    @media (max-width: 768px) {
      .navbar { padding: 0.8rem 1.5rem; }
      .hamburger { display: flex; } /* Show hamburger on mobile */
      .nav-links {
        display: flex;
        flex-direction: column;
        position: absolute;
        top: 100%;
        left: 0;
        width: 100%;
        max-height: 0; /* Hidden by default */
        overflow: hidden;
        opacity: 0;
        visibility: hidden;
        background-color: var(--bg);
        box-shadow: 0 8px 20px rgba(0,0,0,0.15);
        border-top: 1px solid rgba(255, 255, 255, 0.1);
        border-bottom-left-radius: 8px;
        border-bottom-right-radius: 8px;
        text-align: center;
        transition: max-height 0.4s ease-in-out, opacity 0.4s ease-in-out, visibility 0.4s ease-in-out;
        z-index: 999;
      }
      #menu-toggle-checkbox:checked ~ .nav-links {
        max-height: 600px; /* Expand to show links */
        padding: 1rem 0;
        opacity: 1;
        visibility: visible;
      }
      .nav-links li { margin: 0.5rem 0; }
      .nav-links li a {
        padding: 0.8rem 1rem;
        display: block;
      }
      .nav-links a::after { display: none; } /* Hide underline on mobile dropdown */

      #scrollToTopBtn {
        bottom: 20px;
        right: 20px;
        width: 45px;
        height: 45px;
        font-size: 1.5rem;
      }
      main { padding: 1rem; } /* Adjust main padding for mobile */
      /* .auth-section { margin: 5% auto; } removed because main centers it */
      .btn.google-btn, .btn.primary { width: 100%; }

      .toast-notification {
        width: 90%; /* Smaller width on mobile */
        min-width: unset;
        font-size: 1rem;
        padding: 12px 15px;
      }

      .password-reset-container {
        width: 95%; /* Adjust width for smaller screens */
        padding: 1.5rem;
      }
      .password-reset-actions {
        flex-direction: column; /* Stack buttons on small screens */
      }
      /* NEW: Responsive for Verified Profile Popup */
      .verified-profile-popup-content {
        padding: 1.5rem;
      }
      .verified-profile-popup-content .popup-actions {
          flex-direction: column;
      }
    }
  </style>
</head>
<body>
  <!-- Loading Video Screen -->
  <div id="loading-video-screen">
    <video autoplay muted loop playsinline>
      <source src="myloading.mp4" type="video/mp4">
      Your browser does not support HTML5 video.
    </video>
  </div>

  <!-- Toast Notification -->
  <div id="toast-notification" class="toast-notification"></div>

  <!-- Password Reset Modal Overlay -->
  <div id="password-reset-modal-overlay" class="password-reset-modal-overlay">
    <div class="password-reset-container">
      <h3>Forgot Password?</h3>
      <p>Enter your email to receive a password reset link.</p>
      <input type="email" id="reset-email" placeholder="Your Email" required><br>
      <div class="password-reset-actions">
        <button id="send-reset-link-btn" class="btn primary">Send Reset Link</button>
        <button id="cancel-reset-btn" class="btn primary">Cancel</button>
      </div>
    </div>
  </div>

  <!-- NEW: You Are Verified / Profile Customization Popup -->
  <div id="verified-profile-popup-overlay" class="verified-profile-popup-overlay">
    <div class="verified-profile-popup-content">
      <span class="close-button" onclick="closeVerifiedProfilePopup()">&times;</span>
      <p id="verified-message"></p>
      <p>Do you want to customize your profile?</p>
      <div class="popup-actions">
        <button class="btn primary" onclick="window.location.href='profile.html'">Customize Profile</button>
        <button class="btn primary" onclick="closeVerifiedProfilePopup()">No</button>
      </div>
    </div>
  </div>

  <!-- Header Section (Navbar) -->
  <header class="site-header">
    <nav class="navbar">
      <a class="brand" href="index.html">Scriptobot</a>

      <!-- This checkbox input will be hidden and control the menu -->
      <input type="checkbox" id="menu-toggle-checkbox" class="hamburger-checkbox-hidden">

      <!-- This label is now linked to the checkbox above with the 'for' attribute -->
      <label for="menu-toggle-checkbox" class="hamburger" aria-label="Toggle navigation">
        <svg viewBox="0 0 32 32">
          <path class="line line-top-bottom" d="M27 10 13 10C10.8 10 9 8.2 9 6 9 3.5 10.8 2 13 2 15.2 2 17 3.8 17 6L17 26C17 28.2 18.8 30 21 30 23.2 30 25 28.2 25 26 25 23.8 23.2 22 21 22L7 22"></path>
          <path class="line" d="M7 16 27 16"></path>
        </svg>
      </label>

      <ul class="nav-links">
        <li><a href="index.html">Home</a></li>
        <li><a href="about.html">About</a></li>
        <li><a href="services.html">Services</a></li>
        <li><a href="portfolio.html">Portfolio</a></li>
        <li><a href="blog.html">Blog</a></li>
        <li><a href="contact.html">Contact</a></li>
        <li><a href="login.html">Login</a></li>
      </ul>
    </nav>
  </header>

  <!-- Background Video -->
  <div class="video-background">
    <video autoplay muted loop playsinline>
      <source src="background.mp4" type="video/mp4">
      Your browser does not support HTML5 video.
    </video>
  </div>

  <!-- Main content area for login form -->
  <main>
    <section class="auth-section">
      <h2>Login</h2>
      <p>Access your account</p>

      <input type="email" id="login-email" placeholder="Email"><br>
      <input type="password" id="login-password" placeholder="Password"><br>

      <button id="login-btn" class="btn primary">Login</button>

      <!-- Google Button -->
      <div style="margin-top: 1rem;">
        <button id="google-login-btn" class="btn google-btn">
          <!-- Google Icon SVG (Optimized for cleaner display) -->
          <svg class="google-icon" viewBox="0 0 48 48" fill="none" xmlns="http://www.w3.org/2000/svg">
              <path d="M44.5 20H24V28H36.4C35.8 31.7 33.3 34.6 29.6 36.4L29.5 36.5L35.7 41.5C39.4 37.9 42 32.7 43.5 27.2L44.5 20Z" fill="#4285F4"/>
              <path d="M24 44C30.3 44 35.5 42 39.5 38.5L33.3 33.5C31.5 34.9 28.9 36 26 36C20.6 36 15.9 32.3 14.1 27.2L7.8 32.2C10.5 37.4 16.6 40 24 40C24 40 24.1 40 24.2 40C30 40 34.8 38.5 39.5 35.5L43.5 38.5C40.5 41.2 36.9 43.1 32.8 44.5L24 44Z" fill="#34A853"/>
              <path d="M14.1 27.2C13.6 25.8 13.3 24.4 13.3 22.9C13.3 21.4 13.6 20 14.1 18.6L7.8 13.6C6.1 17 5 20.9 5 24.9C5 28.9 6.1 32.8 7.8 36.2L14.1 27.2Z" fill="#FBBC04"/>
              <path d="M24 8C27.3 8 30.2 9.2 32.5 11.2L38.4 6C34.8 2.6 29.8 0 24 0C17 0 11 3.9 8 9.3L14.1 14.4C15.9 9.3 20.6 6 24 6V8Z" fill="#EA4335"/>
          </svg>
          Sign in with Google
        </button>
      </div>

      <p style="margin-top:1rem;">Don't have an account? <a href="signup.html">Sign Up</a></p>
      <a href="#" id="forgot-password-link" class="forgot-password-link">Forgot Password?</a>
    </section>
  </main>

  <!-- Scroll to Top Button -->
  <button id="scrollToTopBtn" title="Go to top">â†‘</button>

  <!-- Simple Footer -->
  <footer>
    <p>&copy; 2025 Scriptobot. All rights reserved.</p>
  </footer>

  <!-- Firebase SDK -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

  <script>
    // âœ… Firebase Config
    const firebaseConfig = {
      apiKey: "AIzaSyCu-j4jpX89hE3zihqb6Ibet22syYFDh1o",
      authDomain: "scriptobot-1.firebaseapp.com",
      projectId: "scriptobot-1",
      storageBucket: "scriptobot-1.appspot.com",
      messagingSenderId: "463059915239",
      appId: "1:463059915239:web:9a5446d23c2c19286b6d42",
      measurementId: "G-X027DDY1PN"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();

    // âœ… Admin UID (static check)
    const ADMIN_UID = "960DpSiDeohIPzRPAX4TTalpAa62";

    const loginBtn = document.getElementById('login-btn');
    const emailInput = document.getElementById('login-email');
    const passwordInput = document.getElementById('login-password');
    const googleLoginBtn = document.getElementById('google-login-btn');

    // Password Reset Elements
    const forgotPasswordLink = document.getElementById('forgot-password-link');
    const passwordResetModalOverlay = document.getElementById('password-reset-modal-overlay');
    const resetEmailInput = document.getElementById('reset-email');
    const sendResetLinkBtn = document.getElementById('send-reset-link-btn');
    const cancelResetBtn = document.getElementById('cancel-reset-btn');

    // NEW: Elements for the profile customization popup
    const verifiedProfilePopupOverlay = document.getElementById('verified-profile-popup-overlay');
    const verifiedMessage = document.getElementById('verified-message');


    // Function to show a toast notification
    function showToast(message, type = 'info') { // type can be 'success', 'error', 'info'
      const toast = document.getElementById('toast-notification');
      toast.textContent = message;
      toast.className = 'toast-notification show'; // Reset classes
      toast.classList.add(type); // Add type class for styling

      setTimeout(() => {
        toast.classList.remove('show');
        // Optional: remove type classes after transition for next use
        setTimeout(() => {
          toast.className = 'toast-notification';
        }, 500); // Match CSS transition duration
      }, 3000); // Toast visible for 3 seconds
    }

    // NEW: Function to close the profile customization popup and redirect
    function closeVerifiedProfilePopup() {
        verifiedProfilePopupOverlay.classList.remove('show');
        // After closing the popup, redirect to index.html for verified users (non-admin)
        window.location.href = "index.html";
    }
    // Make it globally accessible for the onclick in HTML
    window.closeVerifiedProfilePopup = closeVerifiedProfilePopup;


    // ðŸ” Login Button with Email/Password
    loginBtn.addEventListener('click', () => {
      const email = emailInput.value.trim();
      const password = passwordInput.value;

      if (email && password) {
        auth.signInWithEmailAndPassword(email, password)
          .then((cred) => {
            // Success, onAuthStateChanged will handle redirection/popup
            showToast("âœ… Login successful. Checking verification...", 'info');
          })
          .catch(err => {
            showToast("âŒ Error: " + err.message, 'error');
          });
      } else {
        showToast("âš ï¸ Please enter email & password.", 'info');
      }
    });

    // ðŸŒ Google Login Button
    googleLoginBtn.addEventListener('click', () => {
      const provider = new firebase.auth.GoogleAuthProvider();
      auth.signInWithPopup(provider)
        .then((result) => {
            // Success, onAuthStateChanged will handle redirection/popup
            showToast("âœ… Google login successful. Checking verification...", 'info');
        })
        .catch((error) => {
          showToast("âŒ Google Login Error: " + error.message, 'error');
        });
    });

    // ðŸ”„ MODIFIED: Auto Login Redirect and Verification Logic
    auth.onAuthStateChanged((user) => {
      if (user) {
        const currentPath = window.location.pathname;
        // Only proceed with redirects/popups if not already on admin.html, profile.html, or index.html
        if (!currentPath.includes("admin.html") && !currentPath.includes("profile.html") && !currentPath.includes("index.html")) {
            // Check for Admin (no email verification needed)
            if (user.uid === ADMIN_UID) {
                showToast("âœ… Admin Login Successful! Redirecting to admin panel...", 'success');
                setTimeout(() => window.location.href = "admin.html", 1500);
                return; // Exit here for admin
            }

            // Check for Email Verification for regular users
            if (user.emailVerified) {
                // If user is verified and not an admin
                if (!verifiedProfilePopupOverlay.classList.contains('show')) { // Prevent showing multiple times
                    showToast("âœ… You are verified! Redirecting...", 'success');
                    verifiedMessage.textContent = `Hello, ${user.email}! You are verified.`;
                    verifiedProfilePopupOverlay.classList.add('show');
                    // No automatic redirect to index.html immediately here.
                    // User will choose to go to profile.html or close the popup.
                    // If they close, closeVerifiedProfilePopup() will redirect them to index.html.
                }
            } else {
                // User is logged in but not verified and not an admin
                showToast("âš ï¸ Your email is not verified. Please check your email for a verification link or sign up again.", 'error');
                // Logout unverified users to force them through the verification process
                auth.signOut().then(() => {
                    // console.log("Unverified user signed out.");
                    // Optional: show another message after logout if desired, but current toast is informative.
                }).catch((error) => {
                    console.error("Error signing out unverified user:", error);
                });
                // Optional: Redirect to a dedicated page explaining email verification
                // window.location.href = "verify_email_instructions.html";
            }
        } else if (user.emailVerified && !currentPath.includes("admin.html") && !currentPath.includes("profile.html") && currentPath.includes("index.html")) {
            // This condition handles cases where a verified user (non-admin) is already on index.html
            // or lands there and we want to ensure no popup/redirect happens.
            // No explicit action needed here, as the user is where they should be.
        }
      } else {
        // No user is logged in.
        // If they navigate to login.html and are not logged in, no action is needed, they see the login form.
      }
    });

    // âœ… Hide Loading Screen after all content is loaded
    window.addEventListener('load', () => {
      const loadingScreen = document.getElementById('loading-video-screen');
      if (loadingScreen) {
        loadingScreen.classList.add('hidden');
        setTimeout(() => {
          loadingScreen.remove();
        }, 700); // Match this duration with the CSS transition time
      }
    });

    // --- Password Reset Functionality ---
    forgotPasswordLink.addEventListener('click', (e) => {
      e.preventDefault(); // Prevent default link behavior
      passwordResetModalOverlay.classList.add('show');
      resetEmailInput.value = ''; // Clear previous email
    });

    cancelResetBtn.addEventListener('click', () => {
      passwordResetModalOverlay.classList.remove('show');
    });

    sendResetLinkBtn.addEventListener('click', () => {
      const resetEmail = resetEmailInput.value.trim();
      if (resetEmail) {
        auth.sendPasswordResetEmail(resetEmail)
          .then(() => {
            showToast(`âœ… Password reset link sent to ${resetEmail}`, 'success');
            passwordResetModalOverlay.classList.remove('show');
          })
          .catch((error) => {
            showToast(`âŒ Error sending reset link: ${error.message}`, 'error');
          });
      } else {
        showToast("âš ï¸ Please enter your email to reset password.", 'info');
      }
    });


    // JavaScript for Scroll to Top Button
    const scrollToTopBtn = document.getElementById("scrollToTopBtn");

    // Show or hide the button based on scroll position
    window.onscroll = function() {
      if (document.body.scrollTop > 100 || document.documentElement.scrollTop > 100) {
        scrollToTopBtn.style.display = "block";
      } else {
        scrollToTopBtn.style.display = "none";
      }
    };

    // When the user clicks on the button, scroll to the top of the document
    scrollToTopBtn.addEventListener("click", () => {
      document.body.scrollTop = 0; // For Safari
      document.documentElement.scrollTop = 0; // For Chrome, Firefox, IE and Opera
    });
  </script>
</body>
</html>